<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="/styles/account/show.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous" defer></script>
    <script src="/scripts/show.js" defer></script>
    <title>Account Info</title>
</head>

<body>
    <h1>Account <%= account.accountNumber %> Info</h1>
    <hr>


    <span>Account Type: </span>
    <p><%= account.accountType %> </p>

    <span>Bank Name:</span>
    <p><%= account.institution %> </p>
    <span>Account Balance:</span>
    <p>$ <%= account.balance%> </p>

    <span>Account Description:</span>
    <p><%= account.description %> </p>
    <hr>

    <h3>Transactions Log</h3>
    <div class="table-responsive table-wrapper-scroll-y my-custom-scrollbar ">


        <table id="dtBasicExample" class=" dataTable table-striped table-dark table table-bordered table-striped mb-0">
            <thead>
                <tr>
                    <th id="type" scope="col">Transaction Type</th>
                    <th id="amount" scope="col">Amount</th>
                    <th id="date" scope="col">Date</th>
                    <th id="description" scope="col">Description</th>
                    <th scope="col">Update</th>
                    <th scope="col">Delete</th>
                </tr>
            </thead>

            <% account.transactions.forEach(transaction=>{%>

            <tbody>
                <tr>

                    <td class="tt" id="transType"><span><%= transaction.transactionType %> </span> </td>
                    <td>$ <%= transaction.transactionAmount %> </td>
                    <td><%= transaction.date %> </td>
                    <td><%= transaction.transactionDescription%> </td>
                    <th scope="row"> <a href="/transactions/<%= transaction._id %>/edit ">Edit</a> </th>
                    <form action=" /transactions/<%=transaction._id%>?_method=DELETE" method="POST">
                        <th scope="row"> <button type="submit">Delete</button></th>
                    </form>
                </tr>
            </tbody>
            <%}) %>
        </table>
    </div> </br>

    <a href="/accounts/<%= account._id %>/edit "><button>Edit</button></a>

    <form action="/accounts/<%= account._id %>?_method=DELETE " method="POST">
        <button type="submit">Delete</button>
    </form>

    <a href="/transactions/new "> new transaction</a> </br>

    <!-- Nav Bar -->
    <nav class="navbar navbar-expand-lg fixed-bottom">
        <a class="navbar-brand" href="/accounts">Back</a>
    </nav>
</body>

</html>