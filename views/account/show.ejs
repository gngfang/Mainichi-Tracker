<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap">
    <link rel="stylesheet" href="/styles/account/show.css">
    <title>Account Info</title>
</head>

<body>
    <h1>Account <%= account.accountNumber %> </h1>
    </br>

    <div class="wrapper">
        <span>Account Type: </span>
        <p><%= account.accountType %> </p>

        <span>Bank Name:</span>
        <p><%= account.institution %> </p>
        <span>Account Balance:</span>
        <p> $<%= account.balance%> </p>

        <span>Account Description:</span>
        <p><%= account.description %> </p>
        <hr>
    </div>
    <h3>Transactions Log</h3>

    <div class="table-responsive table-wrapper-scroll-y my-custom-scrollbar ">

        <table class="table table-striped table-dark table table-bordered table-striped mb-0" id="tableData">
            <thead>
                <tr>
                    <th scope="col">Transaction Type</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Date</th>
                    <th scope="col">Description</th>
                    <th scope="col">Update</th>
                    <th scope="col">Delete</th>
                </tr>
            </thead>

            <% account.transactions.forEach(transaction=>{%>

            <tbody>
                <tr>
                    <td><%= transaction.transactionType %> </td>
                    <td>$ <%= transaction.transactionAmount %> </td>
                    <td><%= transaction.date %> </td>
                    <td><%= transaction.transactionDescription%> </td>
                    <th scope="row"> <a href="/transactions/<%= transaction._id %>/edit ">Edit</a> </th>
                    <form action=" /transactions/<%=transaction._id%>?_method=DELETE" method="POST">
                        <th scope="row"> <button class="deleteTrans" type="submit">Delete</button></th>
                    </form>

                </tr>
            </tbody>
            <%}) %>
        </table>
        </br>

        </form>

    </div>
    </br>
    <a class="newTrans" href="/transactions/new "> New Transaction</a> </br>
    <a href="/accounts/<%= account._id %>/edit "><button>Edit Account</button></a>

    <form action="/accounts/<%= account._id %>?_method=DELETE " method="POST">
        <button type="submit">Delete Account</button>
        <!-- Nav Bar -->
        <nav class="navbar navbar-expand-lg fixed-bottom">
            <a class="navbar-brand" href="/accounts">Back</a>
        </nav>
</body>

</html>